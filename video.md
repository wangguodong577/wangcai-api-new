#通用参数
|参数名|类型|描述|是否必须|示例|
|---|---|---|---|---|
|token|字符串|用户登录凭证|是(登录、注册接口除外)||
|tz|字符串|用户所在时区|是|Asia/Shanghai|
|pf|字符串|客户端平台类型,ios或者android|是|ios|
#接口域名
```
  测试:
    接口：apitest.video.iwifiapi.com
    后台：admintest.video.iwifiapi.com
  正式:
    接口：api.video.iwifiapi.com
    后台：admin.video.iwifiapi.com
```
#接口返回值说明
1:接口返回类型均为json格式
2:ret参数用于表示是否成功,200为成功,500为失败
3:若成功,可以在data里获得结果,失败则可以通过errcode获得出错原因,错误代码列表可见本文末尾

如成功:
```
{
    "ret":200,
    "data":{
        "token":"",
        "userId":"",
        "nickname":"",
        "avatar":"",
        "thumbnail":""
    }
}
```
失败:
```
{
    "ret":500,
    "errcode":"SERVER_ERROR"
}
```
#接口列表
##话题相关接口
###话题列表
####接口:/topic/list
####请求方式:POST/GET
####接口参数
|参数名|类型|描述|是否必须|示例|
|---|---|---|---|---|
|score|字符串|上一个视频的score，若为空，则从最大的开始|否|12343131564|
|size|整型|返回条数，默认10|否|10|
####成功返回值
```
{
    "ret":200,
    "data":[{
      "id":"",
      "cover":"",
      "name":"",
      "creator":"",
      "sightCount":54,
      "userCount":34,
      "createTime":23233232,
      "score": 3224234234,
      "users"[{
          "id":"",
          "score":"",
          "nickname":""
      }]
    }]
}
```

###发布视频，参加某个话题
####接口:/topic/join
####请求方式:POST/GET
####接口参数
|参数名|类型|描述|是否必须|示例|
|---|---|---|---|---|
|topicId|字符串|话题id|是|xxxxxxxxx|
|title|字符串|视频标题，预留字段，也许能用得上呢|否|xxxxxxxxx|
|url|字符串|视频链接|是|http://xxxxxxxxx|
|cover|字符串|封面图|是|http://xxxxxxxxx|
|width|整型|高度|是|420|
|height|整型|高度|是|20|
####成功返回值
```
{
    "ret":200,
    "data":""
}
```

###创建话题并上传视频接口
####接口:/topic/create
####请求方式:POST/GET
####接口参数
|参数名|类型|描述|是否必须|示例|
|---|---|---|---|---|
|sights|字符串|{"topicName":"","cover":"","sights":[{"url":"","title":"xxxxx","cover":"http://xxx.xxx.x/test.cover.jpg"}]}|是|xxxxxxxxxxxxx|
####成功返回值
```
{
    "ret":200,
    "data":""
}
```
###某话题下的视频列表
####接口:/sight/list
####请求方式:POST/GET
####接口参数
|参数名|类型|描述|是否必须|示例|
|---|---|---|---|---|
|topicId|字符串|话题id|是|xxxxxxxxxxxxx|
|maxId|字符串|上一个列表中最后一个视频id|否|xxxxxxxxxxxxx|
|size|整型|大小|否|32|
####成功返回值
```
{
    "ret":200,
    "data":{
      "topic":{
        "creatorUserInfo":{
          "id":"",
          "avatar":"",
          "nickname":""
        },
        "name":"",
        "cover":"",
        "sightCount":32,
        "userCount":23
      },
      "sights":[
        {
          "userInfo":{
            "id":"",
            "avatar":"",
            "nickname":""
          },
          "hadLike":false,
          "likes":32,
          "views":3443,
          "width":23,
          "height":234,
          "url":"http://sdfsdfsadfsdfsd"
        }
      ]
    }
}
```

###视频点赞用户列表
####接口:/sight/likelist
####请求方式:POST/GET
####接口参数
|参数名|类型|描述|是否必须|示例|
|---|---|---|---|---|
|id|字符串|视频id|是|xxxxxxxxxxxxx|
|size|整型|大小|否|32|
####成功返回值
```
{
    "ret":200,
    "data":[
      {
        "id":"",
        "avatar":"",
        "nickname":""
      }
    ]
}
```

###点赞接口
####接口:/sight/like
####请求方式:POST/GET
####接口参数
|参数名|类型|描述|是否必须|示例|
|---|---|---|---|---|
|id|字符串|视频id|是|xxxxxxxxxxxxx|
|topicId|字符串|话题id|是|xxxxxxxxxxxxx|
####成功返回值
```
{
    "ret":200,
    "data":""
}
```

###取消点赞接口
####接口:/sight/dislike
####请求方式:POST/GET
####接口参数
|参数名|类型|描述|是否必须|示例|
|---|---|---|---|---|
|id|字符串|视频id|是|xxxxxxxxxxxxx|
|topicId|字符串|话题id|是|xxxxxxxxxxxxx|
####成功返回值
```
{
    "ret":200,
    "data":""
}
```

###记录阅读接口
####接口:/sight/view
####请求方式:POST/GET
####接口参数
|参数名|类型|描述|是否必须|示例|
|---|---|---|---|---|
|id|字符串|视频id|是|xxxxxxxxxxxxx|
####成功返回值
```
{
    "ret":200,
    "data":""
}
```

###举报接口
####接口:/sight/report
####请求方式:POST/GET
####接口参数
|参数名|类型|描述|是否必须|示例|
|---|---|---|---|---|
|id|字符串|视频id|是|xxxxxxxxxxxxx|
####成功返回值
```
{
    "ret":200,
    "data":""
}
```

###获得主题库随机主题
####接口:/recommend/topic
####请求方式:POST/GET
####接口参数
无
####成功返回值
```
{
    "ret":200,
    "data":{
      "name":"xxx"
    }
}
```

##用户相关接口
###用户登录
####接口:/user/login
####请求方式:POST
####接口参数
|参数名|类型|描述|是否必须|示例|
|---|---|---|---|---|
|accessToken|字符串|第三方登录成功凭证|是(type为fb或gg时必须)|asdf2jr2ojflajfjlkajfsdfsaf|
|oauthId|字符串|第三方系统唯一标识|是(type为fb或gg时必须)|165464616546|
|type|字符串|第三方账号来源,值为:fb\gg\email|是|fb|
|nickname|字符串|昵称|是|廖进|
|avatar|字符串|头像|是|/avatar/232.png|
|gender|字符串|性别，可选值有male或female|否|male|
####成功返回值
```
{
    "ret":200,
    "data":{
        "token":"",
        "userId":"",
        "nickname":"",
        "avatar":"",
        "thumbnail":""
    }
}
```

##存储相关接口
###获得上传token
####接口:/store/token
####请求方式:POST
####接口参数
无
####成功返回值
```
{
    "ret":200,
    "data":"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
}
```

##升级相关接口
###检查升级接口
####接口:/upgrade/check
####请求方式:POST/GET
####接口参数
|参数名|类型|描述|是否必须|示例|
|---|---|---|---|---|
|ver|整型|客户端当前版本号|是|12|
|channel|字符串|渠道|是|gp|
|locale|字符串|国家|否|zh_CN|
####成功返回值
```
{
    "ret":200,
    "data":{
      "versionCode":12,
      "forceUpdate":true,
      "uploadTime":1212321312312,
      "channel":"gp",
      "hasAttachment":true,
      "fileSize":23232,
      "md5":"sdf2f2fwef24f24f",
      "downloadUrl":"http://video.iwifiapi.com/prod-holaverse/upgrade/files/12.apk",
      "packageName":"com.holaverse.test"
    }
}
```

#错误码
|错误码|含义|
|---|---|
|SERVER_ERROR|系统错误|
|PARAM_ERROR|参数错误|
|USER_NOT_LOGIN|用户未登录|
|USER_LOGIN_FAIL|用户登录失败|
|USER_IS_CANCELED|用户被封禁|
|USER_NOT_EXIST|用户不存在|
