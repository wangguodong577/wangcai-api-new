#通用参数
|参数名|类型|描述|是否必须|示例|
|---|---|---|---|---|
|token|字符串|用户登录凭证|是(登录、注册接口除外)||
|tz|字符串|用户所在时区|是|Asia/Shanghai|
|pf|字符串|客户端平台类型,ios或者android|是|ios|
#接口域名
```
  测试:api.test.enterest.me
  正式:api.enterest.me
```
#接口返回值说明
1:接口返回类型均为json格式
2:ret参数用于表示是否成功,200为成功,500为失败
3:若成功,可以在data里获得结果,失败则可以通过errcode获得出错原因,错误代码列表可见本文末尾

如成功:
```
{
    "ret":200,
    "data":{
        "token":"",
        "userId":"",
        "nickname":"",
        "avatar":"",
        "thumbnail":""
    }
}
```
失败:
```
{
    "ret":500,
    "errcode":"SERVER_ERROR"
}
```
#接口列表
##用户相关接口
###用户登录
####接口:/passport/login
####请求方式:POST
####接口参数
|参数名|类型|描述|是否必须|示例|
|---|---|---|---|---|
|accessToken|字符串|第三方登录成功凭证|是(type为fb或gg时必须)|asdf2jr2ojflajfjlkajfsdfsaf|
|oauthId|字符串|第三方系统唯一标识|是(type为fb或gg时必须)|165464616546|
|type|字符串|第三方账号来源,值为:fb\gg\email|是|fb|
|email|字符串|邮箱|是(type为email时必须)|/avatar/232.png|
|password|字符串|密码|是(type为email时必须)|1985-02-14|
|pf|字符串|平台(ios或者android)|是|ios|
|pushToken|字符串|推送token|是|sdfsdfawefawfasfd|
####成功返回值
```
{
    "ret":200,
    "data":{
        "token":"",
        "userId":"",
        "nickname":"",
        "avatar":"",
        "thumbnail":"",
        "families":[
          {
            "familyId" : "",
            "pets" : [
              "id" : "",
              "name" : "",
              "avatar" : "",
              "gender" : ""
            ]
          }
        ]
    }
}
```
###账号注册,包含有狗的注册,无狗的注册,邀请邮箱注册和注册后申请加入
hasDog:有无狗
familyId:若有,则看isApply,看是否是申请,若isApply为true代表是申请加入,否则为邀请加入
####接口:/passport/register
####请求方式:POST
####接口参数
|参数名|类型|描述|是否必须|示例|
|---|---|---|---|---|
|accessToken|字符串|第三方登录成功凭证|是|asdf2jr2ojflajfjlkajfsdfsaf|
|oauthId|字符串|第三方系统唯一标识|是|165464616546|
|nickname|字符串|用户昵称,必须唯一|是|张三|
|type|字符串|账号来源,可选值有fb\email\gg|是|fb|
|hasDog|布尔值|是否有狗|是|true|
|isApply|布尔值|是否是申请加入|是|true|
|avatar|字符串|用户头像|是|/avatar/232.png|
|birthday|字符串|用户生日,格式为yyyy-MM-dd|否|1985-02-14|
|gender|字符串|第三方系统里的用户性别|否|male|
|email|字符串|用户邮箱,若type为email或通过邀请邮箱注册,则必须|是|test@holaverse.com|
|password|字符串|用户密码,若type为email,则必须|是|23232323|
|familyId|字符串|用户需要加入的家庭id|否|sldfjsljfoi32uor23rf2jl|
|dogName|字符串|狗的名字,有狗为必填|是|旺财|
|breed|字符串|狗的品种id,有狗为必填|是|slfwejflwfwefafsfsaf|
|dogBirthday|字符串|狗的生日,有狗为必填,格式为yyyy-MM-dd|是|2015-05-01|
|isPurebred|布尔值|是否为纯种,有狗为必填|是|true|
|dogGender|字符串|狗的性别,有狗为必填|是|male|
|dogAvatar|字符串|狗的头像,有狗为必填|是|/avatar/dog/lsdfj.jpg|
|locale|字符串|用户语言|否||
|timezone|字符串|用户所在时区|是|8|
|locationId|字符串|用户所在地区id|否||
|locationName|字符串|用户所在地区名|否||
|pf|字符串|平台(ios或者android)|是|ios|
|pushToken|字符串|推送token|是|sdfsdfawefawfasfd|
####成功返回值
```
{
    "ret":200,
    "data":{
        "token":"",
        "userId":"",
        "nickname":"",
        "avatar":"",
        "thumbnail":""
    }
}
```
###用户退出登录
####接口:/passport/logout
####请求方式:POST/GET
####接口参数
无
####成功返回值
```
{
    "ret":200,
    "data":""
}
```

###用户删除(测试用)
####接口:/passport/delete
####请求方式:POST/GET
####接口参数
|参数名|类型|描述|是否必须|示例|
|---|---|---|---|---|
|accessToken|字符串|第三方登录成功凭证|是(type为fb或gg时必须)|asdf2jr2ojflajfjlkajfsdfsaf|
|oauthId|字符串|第三方系统唯一标识|是(type为fb或gg时必须)|165464616546|
|type|字符串|第三方账号来源,值为:fb\gg\email|是|fb|
|email|字符串|邮箱|是(type为email时必须)|/avatar/232.png|
####成功返回值
```
{
    "ret":200,
    "data":""
}
```
##家庭相关接口
###邀请加入家庭
####接口:/families/invite
####请求方式:POST
####接口参数
|参数名|类型|描述|是否必须|示例|
|---|---|---|---|---|
|familyId|字符串|家庭id|是|asdf2jr2ojflajfjlkajfsdfsaf|
|email|字符串|被邀请人的邮箱|是|165464616546|
####成功返回值
```
{
    "ret":200,
    "data":""
}
```

###获得邮箱所有的被邀请的家庭列表
####接口:/families/invite
####请求方式:GET
####接口参数
|参数名|类型|描述|是否必须|示例|
|---|---|---|---|---|
|email|字符串|被邀请人的邮箱|是|165464616546|
####成功返回值
```
{
    "ret":200,
    "data":[]
}
```

###家长审核申请
####接口:/families/audit
####请求方式:GET/POST
####接口参数
|参数名|类型|描述|是否必须|示例|
|---|---|---|---|---|
|applyId|字符串|邀请id|是|165464616546|
|accept|布尔值|是否通过该申请|是|true|
####成功返回值
```
{
    "ret":200,
    "data":""
}
```

###家长移除成员
####接口:/families/remove
####请求方式:GET/POST
####接口参数
|参数名|类型|描述|是否必须|示例|
|---|---|---|---|---|
|familyId|字符串|家庭id|是|sdfsdfawefawfasfd|
|userId|字符串|待移除的成员id|是|dsdfsldfjlasfe|
####成功返回值
```
{
    "ret":200,
    "data":""
}
```

##用户相关接口
###更新token信息
####接口:/user/push/token
####请求方式:GET/POST
####接口参数
|参数名|类型|描述|是否必须|示例|
|---|---|---|---|---|
|userId|字符串|用户id|否(当且仅当未登录为空)|dsdfsldfjlasfe|
|pf|字符串|平台(ios或者android)|是|ios|
|pushToken|字符串|推送token|是|sdfsdfawefawfasfd|
####成功返回值
```
{
    "ret":200,
    "data":""
}
```

#错误码
|错误码|含义|
|---|---|
|SERVER_ERROR|系统错误|
|PARAM_ERROR|参数错误|
|USER_NOT_LOGIN|用户未登录|
|USER_LOGIN_FAIL|用户登录失败|
|USER_IS_CANCELED|用户被封禁|
|NICKNAME_HAS_EXIST|昵称已经存在|
|NICKNAME_IS_INVALID|昵称不合法|
|OAUTH_ALREADY_BIND|第三方账号已经绑定别的用户|
|USER_EXISTS|用户已经存在|
|USER_NOT_EXIST|用户已经加入某个家庭|
|USER_NOT_EXIST|用户不存在|
|VALID_FAILED|第三方账号二次校验失败|
